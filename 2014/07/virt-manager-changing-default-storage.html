<!DOCTYPE html>
<!-- Generated 2020-07-12 09:43:17.554055 -->
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142995745-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-142995745-1');
    </script>
    <link rel="canonical" href="https://blog.wikichoon.com/2014/07/virt-manager-changing-default-storage.html"/>
      <title>virt-manager: changing the default storage path and default virtual network | Cole Robinson</title>
      <meta charset="utf-8" />
      <link href="https://blog.wikichoon.com/theme/minima-main.css" rel="stylesheet" />
      <link href="https://blog.wikichoon.com/theme/coletheme.css" rel="stylesheet" />
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link href="https://blog.wikichoon.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cole Robinson Full Atom Feed" />
  </head>

  <body id="index" class="archive">
    <header class="site-header">
      <div class="wrapper">
        <a class="site-title" href="https://blog.wikichoon.com">Cole Robinson</a>
        <nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
              </svg>
            </span>
          </label>
          <div class="trigger">
            <a class="page-link" href="https://blog.wikichoon.com">Home</a>
            <a class="page-link" href="https://blog.wikichoon.com/archives.html">Archives</a>
            <a class="page-link" href="https://wikichoon.com">About</a>
          </div>
        </nav>
      </div>
    </header>

    <main id="content" class="page-content">
      <div class="wrapper">
      <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
        <header>
          <h1 class="post-title givemecolor" itemprop="name headline">virt-manager: changing the default storage path and default virtual network</h2>
          <p class="post-meta">
            <time class="dt-published" datetime="2014-07-15T15:45:00-04:00" itemprop="datePublished">Tue 15 July 2014
            </time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Cole Robinson</span>
            </span> • Tags: <a href="https://blog.wikichoon.com/tag/fedora.html">fedora</a> <a href="https://blog.wikichoon.com/tag/virt.html">virt</a>           </p>
        </header>

        <div class="post-content" itemprop="articleBody">
          <p>When creating a new virtual machine via virt-manager or virt-install, the tools make some assumptions about the default location for disk images, and the default network source.</p>
<p>For example, in the <strong>New VM</strong> wizard, the storage page will offer to create a disk image in the default location:</p>
<p><img alt="virt-manager default storage UI" height="400" src="https://blog.wikichoon.com/images/029-virt-manager-changing-default-storage-1.png" width="367"></p>
<p>The default location for most uses of virt-manager is <code>/var/lib/libvirt/images</code>, which is created by libvirt and has the expected selinux labelling and permission to run QEMU/KVM VMs.</p>
<p>Behind the scenes, virt-manager is using a libvirt storage pool for creating disk images. When the <strong>New VM</strong> wizard is first run, virt-manager looks for a storage pool named <strong>default</strong>; if it doesn't find that it will create a storage pool named <strong>default</strong> pointing to <code>/var/lib/libvirt/images</code>. It then uses that <strong>default</strong> pool for the disk provisioning page.</p>
<p>The default virtual network works similarly. The libvirt-daemon-config-network package will dynamically create a libvirt virtual network named <strong>default</strong>. You can see the XML definition <a href="https://libvirt.org/git/?p=libvirt.git;a=blob;f=src/network/default.xml;h=d7241d0c16271bb7598b5bc1bb90d8145183de50;hb=HEAD">over here</a> in libvirt.git.</p>
<p>When virt-manager reaches the last page of the <strong>New VM</strong> wizard, if there's a virtual network named <strong>default</strong>, we automatically select it as the network source:</p>
<p><img alt="virt-manager default network UI" height="400" src="https://blog.wikichoon.com/images/029-virt-manager-changing-default-storage-2.png" width="285"></p>
<p>It's also the network source used when no explicit network configuration is passed to <code>virt-install</code>.</p>
<p>Every now and then someone asks how to make virt-manager/virt-install use a different storage pool or network as the default. As the above logic describes, just name the desired virtual network or storage pool <strong>default</strong>, and the tools will do the right thing.</p>
<p>You can rename storage pools and virtual networks using virt-manager's UI from <strong>Edit->Connection Details</strong>. It only works on a stopped object though. Here's an example renaming a virtual network <strong>default</strong> to <strong>new-name</strong>:</p>
<p><img alt="virt-manager rename virtual network UI" height="481" src="https://blog.wikichoon.com/images/029-virt-manager-changing-default-storage-3.png" width="640"></p>
        </div>

        <div id="disqus_thread"></div>
        <script>
          var disqus_config = function () {
            this.page.url = 'https://blog.wikichoon.com/2014/07/virt-manager-changing-default-storage.html';
            this.page.identifier = 'https://blog.wikichoon.com/2014/07/virt-manager-changing-default-storage.html';
          };

          (function() {
            var d = document, s = d.createElement('script');
            s.src = 'https://wikichoon-com.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </article>
      </div>
    </main>

    <footer class="site-footer h-card">
      <div class="wrapper">
        <h2 class="footer-heading">Cole's dev log</h2>
        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <ul class="contact-list">
                <li class="p-name">Cole Robinson </li><li><a class="u-email" href="mailto:">aintdiscole@gmail.com</a></li>
            </ul>
          </div>

          <div class="footer-col footer-col-2">
            <ul class="social-media-list">
              <li><a href="https://github.com/crobinso"><svg class="svg-icon"><use xlink:href="https://blog.wikichoon.com/theme/minima-social-icons.svg#github"></use></svg> <span class="username">crobinso</span></a></li>
              <li><a href="https://www.twitter.com/aintdiscole"><svg class="svg-icon"><use xlink:href="https://blog.wikichoon.com/theme/minima-social-icons.svg#twitter"></use></svg> <span class="username">aintdiscole</span></a></li>
              <li><a href="https://www.linkedin.com/in/cole-robinson-484a9912"><svg class="svg-icon"><use xlink:href="https://blog.wikichoon.com/theme/minima-social-icons.svg#linkedin"></use></svg> <span class="username">Cole Robinson</span></a></li>
            </ul>
          </div>

          <div class="footer-col footer-col-3">
            <a href="https://blog.wikichoon.com/feeds/all.atom.xml">RSS</a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>