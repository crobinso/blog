<!DOCTYPE html>
<!-- Generated 2020-08-31 14:41:58.846315 -->
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142995745-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-142995745-1');
    </script>
    <link rel="canonical" href="https://blog.wikichoon.com/2014/05/invoking-bugzilla-query-url-from.html"/>
      <title>Invoking a bugzilla query URL from the command line | Cole Robinson</title>
      <meta charset="utf-8" />
      <link href="https://blog.wikichoon.com/theme/minima-main.css" rel="stylesheet" />
      <link href="https://blog.wikichoon.com/theme/coletheme.css" rel="stylesheet" />
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link href="https://blog.wikichoon.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cole Robinson Full Atom Feed" />
  </head>

  <body id="index" class="archive">
    <header class="site-header">
      <div class="wrapper">
        <a class="site-title" href="https://blog.wikichoon.com">Cole Robinson</a>
        <nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
              </svg>
            </span>
          </label>
          <div class="trigger">
            <a class="page-link" href="https://blog.wikichoon.com">Home</a>
            <a class="page-link" href="https://blog.wikichoon.com/archives.html">Archives</a>
            <a class="page-link" href="https://wikichoon.com">About</a>
          </div>
        </nav>
      </div>
    </header>

    <main id="content" class="page-content">
      <div class="wrapper">
      <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
        <header>
          <h1 class="post-title givemecolor" itemprop="name headline">Invoking a bugzilla query URL from the command line</h2>
          <p class="post-meta">
            <time class="dt-published" datetime="2014-05-20T10:00:00-04:00" itemprop="datePublished">Tue 20 May 2014
            </time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Cole Robinson</span>
            </span> • Tags: <a href="https://blog.wikichoon.com/tag/fedora.html">fedora</a>           </p>
        </header>

        <div class="post-content" itemprop="articleBody">
          <p><code>/usr/bin/bugzilla</code> provided by <a href="https://fedorahosted.org/python-bugzilla/">python-bugzilla</a> is quite handy for managing batch actions on bugs or quickly performing simple queries. However when you want to perform a crazy query with all sorts of boolean rules that the web UI exposes, the command line gets pretty unwieldy.</p>
<p>There's a simple workaround for this. Generate a query URL using the bugzilla web UI, and pass it to <code>/usr/bin/bugzilla</code> like:</p>
<p><code>bugzilla query --from-url "$URL"</code></p>
<p>For example, say I go to the bugzilla web UI and say 'show me all open, upstream libvirt bugs that haven't received a comment in since 2013'. It generates a massive URL. Here's what the URL looks like:</p>
<div class="highlight"><pre><span></span><code><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bugzilla</span><span class="p">.</span><span class="n">redhat</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">buglist</span><span class="p">.</span><span class="n">cgi</span><span class="o">?</span><span class="n">bug_status</span><span class="o">=</span><span class="k">NEW</span><span class="o">&amp;</span><span class="n">bug_status</span><span class="o">=</span><span class="n">ASSIGNED</span><span class="o">&amp;</span><span class="n">bug_status</span><span class="o">=</span><span class="n">POST</span><span class="o">&amp;</span><span class="n">bug_status</span><span class="o">=</span><span class="n">MODIFIED</span><span class="o">&amp;</span><span class="n">bug_status</span><span class="o">=</span><span class="n">ON_DEV</span><span class="o">&amp;</span><span class="n">bug_status</span><span class="o">=</span><span class="n">ON_QA</span><span class="o">&amp;</span><span class="n">bug_status</span><span class="o">=</span><span class="n">VERIFIED</span><span class="o">&amp;</span><span class="n">bug_status</span><span class="o">=</span><span class="n">RELEASE_PENDING</span><span class="o">&amp;</span><span class="n">classification</span><span class="o">=</span><span class="n">Community</span><span class="o">&amp;</span><span class="n">component</span><span class="o">=</span><span class="n">libvirt</span><span class="o">&amp;</span><span class="n">f1</span><span class="o">=</span><span class="n">longdesc</span><span class="o">&amp;</span><span class="n">list_id</span><span class="o">=</span><span class="mi">2372821</span><span class="o">&amp;</span><span class="n">n1</span><span class="o">=</span><span class="mi">1</span><span class="o">&amp;</span><span class="n">o1</span><span class="o">=</span><span class="n">changedafter</span><span class="o">&amp;</span><span class="n">product</span><span class="o">=</span><span class="n">Virtualization</span><span class="o">%</span><span class="mi">20</span><span class="n">Tools</span><span class="o">&amp;</span><span class="n">query_format</span><span class="o">=</span><span class="n">advanced</span><span class="o">&amp;</span><span class="n">v1</span><span class="o">=</span><span class="mi">2013</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">31</span>
</code></pre></div>


<p>Just pass that that string as <code>$URL</code> in the above command, and you should see the same results as the web search (if your results aren't the same, you might need to do <code>bugzilla login</code> first to cache credentials).</p>
<p>This is also easy to do via the python API:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/python</span>

<span class="kn">import</span> <span class="nn">bugzilla</span>
<span class="n">bzapi</span> <span class="o">=</span> <span class="n">bugzilla</span><span class="o">.</span><span class="n">Bugzilla</span><span class="p">(</span><span class="s2">&quot;bugzilla.redhat.com&quot;</span><span class="p">)</span>
<span class="n">buglist</span> <span class="o">=</span> <span class="n">bzapi</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">bzapi</span><span class="o">.</span><span class="n">url_to_query</span><span class="p">(</span><span class="s2">&quot;URL&quot;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">bug</span> <span class="ow">in</span> <span class="n">buglist</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">bug</span><span class="o">.</span><span class="n">summary</span>
</code></pre></div>


<p>The caveat: as of now this only works with bugzilla.redhat.com, which has an API extension that allows it to interpret the URL syntax as regular query parameters. My understanding is that this may be available upstream at some point, so other bugzilla instances will benefit as well.</p>
<p>(Edit 2019: I believe this works for all bugzilla 5.0 versions nowadays, not just bugzilla.redhat.com)</p>
        </div>

        <div id="disqus_thread"></div>
        <script>
          var disqus_config = function () {
            this.page.url = 'https://blog.wikichoon.com/2014/05/invoking-bugzilla-query-url-from.html';
            this.page.identifier = 'https://blog.wikichoon.com/2014/05/invoking-bugzilla-query-url-from.html';
          };

          (function() {
            var d = document, s = d.createElement('script');
            s.src = 'https://wikichoon-com.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </article>
      </div>
    </main>

    <footer class="site-footer h-card">
      <div class="wrapper">
        <h2 class="footer-heading">Cole's dev log</h2>
        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <ul class="contact-list">
                <li class="p-name">Cole Robinson </li><li><a class="u-email" href="mailto:">aintdiscole@gmail.com</a></li>
            </ul>
          </div>

          <div class="footer-col footer-col-2">
            <ul class="social-media-list">
              <li><a href="https://github.com/crobinso"><svg class="svg-icon"><use xlink:href="https://blog.wikichoon.com/theme/minima-social-icons.svg#github"></use></svg> <span class="username">crobinso</span></a></li>
              <li><a href="https://www.twitter.com/aintdiscole"><svg class="svg-icon"><use xlink:href="https://blog.wikichoon.com/theme/minima-social-icons.svg#twitter"></use></svg> <span class="username">aintdiscole</span></a></li>
              <li><a href="https://www.linkedin.com/in/cole-robinson-484a9912"><svg class="svg-icon"><use xlink:href="https://blog.wikichoon.com/theme/minima-social-icons.svg#linkedin"></use></svg> <span class="username">Cole Robinson</span></a></li>
            </ul>
          </div>

          <div class="footer-col footer-col-3">
            <a href="https://blog.wikichoon.com/feeds/all.atom.xml">RSS</a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>